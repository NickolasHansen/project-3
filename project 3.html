<!doctype html>
<html lang="en">
<head>
 <title>happy fun times</title>
 <meta charset="utf-8">
 <style>
canvas {
 border: 1px solid black;;
}
body {
    background-color: black;
}
</style>
 <script>
 var canvas;
 var context;
 var particles;
 var timer;
 var fireworks;
 	var particles = [];
	
document.addEventListener("keydown", keyDownTextField, false);

function keyDownTextField(e) {
var keyCode = e.keyCode;
  if(keyCode==69) {
  cOp ++;
  } else if(keyCode == 87 && mL == 0) {
  mL = 1
  } else if(keyCode == 87 && mL == 1) {
  mL = 0
  } else if (keyCode == 81 && rM == 0){
  rM = 1
  } else if (keyCode == 81 && rM == 1){
  rM = 0
  }
}


 function makeParticles(x,y) {
	//create an array of particles for our animation

	for(var i = 0; i < 60; i++)
	{
		particles.push(new Particle(x,y));
	}
 }
 function degreesToRadians(degrees) {
	 //converts from degrees to radians and returns
	 return (degrees * Math.PI)/180;
 }
 function Particle(x,y)
 {
	 //the constructor for a single particle, with random starting x+y, velocity, color, and radius
	 this.x = x;
	 this.y = y;
	 this.vx = Math.random()*10-5;
	 this.vy = Math.random()*10-5;
	 var colors = ["crimson", "darkgreen", "navy", "slategray", "purple", "seagreen", "darkblue"];
	 this.color = colors[Math.floor(Math.random()*colors.length)];
	 this.radius = 30;
	  if(this.radius > 0){
			this.radious = this.radius - .5;
		 }
 }
 function styleS(){
  makeParticles(0,0);
 }
 var xC = 150
 var yC = 100
 var rC = 200
 function cone(){
	context.beginPath();
	context.moveTo(xC,yC);
	context.lineTo(xC + 50, yC + 50);
	context.lineTo(xC + 100, yC);
	context.lineJoin = 'round';
	context.quadraticCurveTo(rC, 40, xC, yC);
	context.lineJoin = 'round';
	context.lineWidth = 10;
	context.lineCap = 'round';
	context.fillStyle = 'crimson';
    context.fill();
  if (yC < 700)
	yC = yC + 3
 }
 function oddShape(){
	context.beginPath();
      context.moveTo(500, 500);
	  context.lineTo(400, 400);
      context.bezierCurveTo(425, 420, 130, 500, 350, 350);
      context.bezierCurveTo(350, 200, 320, 180, 425, 300);
      context.bezierCurveTo(420, 150, 620, 120, 450, 350);
      context.bezierCurveTo(500, 540, 600, 475, 500, 500);
	context.lineJoin = 'round';
	context.lineWidth = 10;
	context.lineCap = 'round';
	context.strokeStyle = 'darkblue';
    context.stroke();
 
 }
 var xL = 100
 var yL = 700
 var mL = 0
 function lineShape(){
	context.beginPath();
	context.moveTo(xL,yL);
	context.lineTo(xL + 200, yL);
	context.lineTo(xL + 150, yL - 100);
	context.lineTo(xL+ 50, yL - 200);
	context.lineTo(xL + 60, yL - 160);
	context.lineTo(xL + 30, yL - 190);
	context.lineTo(xL,yL);
	context.lineJoin = 'round';
	context.lineWidth = 10;
	context.lineCap = 'round';
	context.fillStyle = 'navy';
    context.fill();
	  if (yL > 250 && mL == 1){
	yL = yL - 3
	} else if (yL < 700 && mL == 0){
	yL = yL + 3
	}
 }
 
 function house(){
	context.beginPath();
	context.moveTo(800,700);
	context.lineTo(600, 700);
	context.lineTo(600, 500);
	context.lineTo(700, 400);
	context.lineTo(800, 500);
	context.lineTo(800, 700);
	context.lineJoin = 'round';
	context.lineWidth = 10;
	context.lineCap = 'round';
	context.strokeStyle = 'gold';
    context.stroke();
 }
 var rM = 0;
 function fun(){
	context.beginPath();
	context.moveTo(800,300);
	context.lineTo(600, 300);
	context.quadraticCurveTo(500, 250, 600, 200);
	//context.lineTo(600, 500);
	context.quadraticCurveTo(650, 125, 700, 150);
	//context.lineTo(700, 400);
	context.lineTo(700, 200);
	context.quadraticCurveTo(900, 250, 800, 300);
	context.lineTo(800, 300);
	context.lineJoin = 'round';
	context.lineWidth = 10;
	context.lineCap = 'round';
	if (rM == 0){
	context.fillStyle = 'seagreen';
    context.fill();
	} else if (rM == 1){
	context.fillStyle = 'orange';
    context.fill();
	}
	//context.globalCompositeOperation = "xor";
 }
 function text(x){
    //x = 10
	context.font = "30px Times New Roman";
	context.fillStyle = 'black';
	context.fillText("Hello World",x,790);
	//x = x + 3
 }
 var fS =0
 var xt = 0;
 function fShift(){
	fS = 1
	//console.log("fired")
 }
 var cOp = 0
 function compC (){
 if (cOp == 0){
	context.globalCompositeOperation = "xor";
 } else if (cOp == 1){
	context.globalCompositeOperation = "source-atop";
 } else if (cOp == 2){
	context.globalCompositeOperation = "lighter";
 } else if (cOp == 3){
	context.globalCompositeOperation = "multiply";
 } else if (cOp == 4){
	context.globalCompositeOperation = "darken";
 } else if (cOp == 5){
	context.globalCompositeOperation = "lighten";
 } else if (cOp == 6){
	context.globalCompositeOperation = "color-burn";
 } else if (cOp == 7){
	cOp = 0;
 }
 
 }
 var timerT = 0
 function resetT(){
 timerT = 0
 }
 function moveParticles() {
	//var x = 0;
	 fillBackgroundColor();
	 context.globalCompositeOperation = "source-over";
	 context.fillStyle = "slategray";
	 context.fillRect(0, 0, canvas.width, canvas.height);
	 //context.globalCompositeOperation = "xor";
	 if (timerT == 0){
	 styleS();
	 setTimeout(resetT, 1000);
	 timerT = 1;
	 }
	 compC();
	 cone();
	 oddShape();
	 lineShape();
	 house();
	 fun();
	 //text(x);
	setTimeout(fShift, 3000)
	context.font = "30px Times New Roman";
	if(fS == 1){
	 context.fillStyle = 'maroon';
	}else{
	context.fillStyle = 'black';
	}
	context.fillText("Click anywhere for particles",xt,790);
	context.fillText("Hit e,w,q for other effects",xt,100);
	 if(xt < 600){
	 //console.log(xt)
	   xt += 3;
	 }
	 for(var i = 0; i < particles.length; i++)
	 {
		 var p = particles[i];
		 context.beginPath();
		 context.arc(p.x, p.y, p.radius, 0, degreesToRadians(360), true);
		 context.fillStyle = p.color;
		 context.fill();
		 p.x += p.vx;
		 p.y += p.vy;
		 if(p.x < -50) p.x = canvas.width+50;
		 if(p.y < -50) p.y = canvas.height+50;
		 if(p.x > canvas.width+50) p.x = -50;
		 if(p.y > canvas.height+50) p.y = -50;
		 if(p.radius > 0){
		 //console.log(p.radius)
			p.radius -= .5;
		 }
	 }
 }
function fillBackgroundColor() {
		 context.fillStyle = 'slategray';
		 context.fillRect(0, 0, canvas.width, canvas.height);
	}
 window.onload = function() {
 	 canvas = document.getElementById('canvas');
	 context = canvas.getContext('2d');
	 canvas.onclick = function(event) {
     makeParticles(event.clientX, event.clientY);
 };
	 timer = setInterval(moveParticles, 20);
 }
</script>
</head>
<body>
	<canvas id="canvas" width="1000" height="800"></canvas>
</body>
</html>